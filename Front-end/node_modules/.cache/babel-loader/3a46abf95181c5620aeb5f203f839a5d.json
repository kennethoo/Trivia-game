{"ast":null,"code":"import _classCallCheck from\"/Users/kenneth/Desktop/react-project/lanch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kenneth/Desktop/react-project/lanch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kenneth/Desktop/react-project/lanch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kenneth/Desktop/react-project/lanch/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{withRouter}from\"react-router-dom\";import Chat from\"../component/chat\";import question from\"../question\";import{connect}from\"react-redux\";import{BsFillChatFill}from\"react-icons/bs\";import CountDown from\"../component/coutDown\";import socket from\"../socketconf\";import Leaderboard from\"../component/leaderboard\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var time=null;var realTimeLeaderboardState={};var Join=/*#__PURE__*/function(_Component){_inherits(Join,_Component);var _super=_createSuper(Join);function Join(){var _this;_classCallCheck(this,Join);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={currentUser:0,message:true,game:false,start:false,leaderboard:false,awnser:\"5\",currentCount:0,correctAwnser:\"5\",liveCounter:11,check:false,currentQuestion:{},currentScore:0,begin:false,displayCount:false,leadB:[],chat:false};_this.realTime=function(){socket.on(\"beginTheGame\",function(){_this.setState({displayCount:true});setTimeout(function(){_this.setState({game:true},function(){document.querySelector(\"#containerr\").scrollTop=document.querySelector(\"#containerr\").scrollHeight;_this.setState({displayCount:false},function(){_this.startTheGame();_this.setState({});});});},4000);});socket.on(\"update-score\",function(data){if(realTimeLeaderboardState[data.name]){realTimeLeaderboardState[data.name]=Math.max(realTimeLeaderboardState[data.name],data.score);}else{realTimeLeaderboardState[data.name]=data.score;}});};_this.buildCounter=function(duration){var timer=duration,minutes,seconds;minutes=parseInt(timer/60,10);seconds=parseInt(timer%60,10);minutes=minutes<10?\"0\"+minutes:minutes;seconds=seconds<10?\"0\"+seconds:seconds;//display.textContent = minutes + \":\" + seconds;\nif(--timer<0){return\"00:00\";}else{return minutes+\":\"+seconds;}};_this.componentWillUnmount=function(){socket.off(\"beginTheGame\");socket.off(\"update-score\");socket.emit(\"leave-room\",_this.props.roomId);_this.props.loginAthification({connected:false,room:\"\",username:\"\"});};_this.componentDidMount=function(){if(!_this.props.connected){_this.props.history.push(\"/\");}else{_this.setState({roomId:_this.props.roomId,currentQuestion:question[_this.state.currentCount]});_this.realTime();}};_this.checkAwnser=function(){_this.setState({check:true,correctAwnser:_this.state.currentQuestion.awnser});if(_this.state.awnser!==\"5\"){if(_this.state.awnser===_this.state.correctAwnser){var curentScore=_this.state.currentScore;curentScore+=10;_this.setState({currentScore:curentScore});}}else{}socket.emit('new-score',{room:_this.props.roomId,name:_this.props.username,score:_this.state.currentScore});setTimeout(function(){_this.setState({liveCounter:11},function(){_this.moveNext();if(_this.state.currentCount+1!==question.length){_this.callTheGame();}});},5000);};_this.showLeaderBoard=function(){var currentLeaderBoard=[];for(var key in realTimeLeaderboardState){currentLeaderBoard.push({name:key,score:realTimeLeaderboardState[key]});}currentLeaderBoard.sort(function(a,b){return b.score-a.score;});_this.setState({leadB:currentLeaderBoard},function(){_this.displayLeaderboad();});};_this.displayLeaderboad=function(){_this.setState({leaderboard:true},function(){document.querySelector(\"#containerr\").scrollTop=document.querySelector(\"#containerr\").scrollHeight;});};_this.moveNext=function(){if(_this.state.currentCount+1!==question.length){_this.setState({awnser:\"5\",correctAwnser:\"5\",check:false,currentCount:_this.state.currentCount+1,currentQuestion:question[_this.state.currentCount+1]});}else{_this.showLeaderBoard();}};_this.handleClick=function(e){_this.setState({awnser:e.target.id,correctAwnser:_this.state.currentQuestion.awnser});};_this.callTheGame=function(){time=setInterval(function(){if(_this.state.liveCounter===1){clearInterval(time);_this.setState({liveCounter:0},function(){_this.checkAwnser();});}else{_this.setState({liveCounter:_this.state.liveCounter-1});}},1000);};_this.openChat=function(data){_this.setState({chat:data});};_this.startTheGame=function(){_this.callTheGame();};return _this;}_createClass(Join,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"createe-user\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"containerr\",children:[/*#__PURE__*/_jsx(CountDown,{displayCount:this.state.displayCount}),/*#__PURE__*/_jsx(\"div\",{id:\"createe\",children:/*#__PURE__*/_jsx(\"div\",{id:\"back-page\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-left\"})})}),this.state.message?/*#__PURE__*/_jsxs(\"div\",{id:\"message\",children:[/*#__PURE__*/_jsx(\"header\",{id:\"header\",children:/*#__PURE__*/_jsx(\"p\",{id:\"user-game-name\",children:\"CS Trivia\"})}),/*#__PURE__*/_jsxs(\"div\",{id:\"code\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"message-game\",children:\"Wait for the host to start the game\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"box-room\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"h3\",children:\"Room Id\"}),/*#__PURE__*/_jsx(\"p\",{id:\"room-id\",children:this.state.roomId})]})]}),/*#__PURE__*/_jsx(\"div\",{id:\"ready-box\",children:/*#__PURE__*/_jsx(\"p\",{id:\"text-redy\",children:\"3\"})}),/*#__PURE__*/_jsx(\"div\",{id:\"overlay\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"people-connected\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"closes\",children:/*#__PURE__*/_jsx(\"p\",{className:\"fas fa-times\"})}),/*#__PURE__*/_jsx(\"div\",{id:\"test-descrb-people\",children:\"Player \"}),/*#__PURE__*/_jsx(\"div\",{id:\"title-name-conected\"}),/*#__PURE__*/_jsx(\"div\",{id:\"list\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"list-people\",children:[/*#__PURE__*/_jsx(\"i\",{id:\"ico\",className:\"far fa-user-circle\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"name-connected\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"name-user-conec\",children:this.props.username}),/*#__PURE__*/_jsx(\"p\",{id:\"host\"})]})]})})]})]}):\"\",this.state.game?/*#__PURE__*/_jsxs(\"div\",{id:\"game\",children:[/*#__PURE__*/_jsxs(\"header\",{id:\"head\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"online-user\",children:this.props.username}),/*#__PURE__*/_jsx(\"div\",{id:\"point\",children:/*#__PURE__*/_jsx(\"p\",{id:\"coin\",children:this.state.currentScore})})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"online-game\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"timeur\",children:/*#__PURE__*/_jsx(\"p\",{id:\"time\",children:this.buildCounter(this.state.liveCounter)})}),/*#__PURE__*/_jsxs(\"div\",{id:\"question\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"imgpp\"}),/*#__PURE__*/_jsx(\"p\",{id:\"curentquest\",children:this.state.currentQuestion.question})]}),/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsxs(\"div\",{id:\"wraper\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"one\",className:\"awnser\",children:/*#__PURE__*/_jsx(\"li\",{onClick:this.handleClick,id:\"1\",className:\"awnsers \".concat(this.state.awnser===\"1\"?\"selected\":\"\",\"   \").concat(this.state.check?this.state.correctAwnser===\"1\"?\"correct\":\"\":\"\",\" \").concat(this.state.check?this.state.awnser===\"1\"&&this.state.awnser!==this.state.correctAwnser?\"incorect\":\"\":\"\"),children:this.state.currentQuestion.choiceOne})}),/*#__PURE__*/_jsx(\"div\",{id:\"two\",className:\"awnser\",children:/*#__PURE__*/_jsx(\"li\",{onClick:this.handleClick,id:\"2\",className:\"awnsers \".concat(this.state.awnser===\"2\"?\"selected\":\"\",\"   \").concat(this.state.check?this.state.correctAwnser===\"2\"?\"correct\":\"\":\"\",\" \").concat(this.state.check?this.state.awnser===\"2\"&&this.state.awnser!==this.state.correctAwnser?\"incorect\":\"\":\"\"),children:this.state.currentQuestion.choiceTwo})}),/*#__PURE__*/_jsx(\"div\",{id:\"three\",className:\"awnser\",children:/*#__PURE__*/_jsx(\"li\",{onClick:this.handleClick,id:\"3\",className:\"awnsers \".concat(this.state.awnser===\"3\"?\"selected\":\"\",\"   \").concat(this.state.check?this.state.correctAwnser===\"3\"?\"correct\":\"\":\"\",\"  \").concat(this.state.check?this.state.awnser===\"3\"&&this.state.awnser!==this.state.correctAwnser?\"incorect\":\"\":\"\",\" \"),children:this.state.currentQuestion.choiceThree})}),/*#__PURE__*/_jsx(\"div\",{id:\"four\",className:\"awnser\",children:/*#__PURE__*/_jsx(\"li\",{onClick:this.handleClick,id:\"4\",className:\"awnsers \".concat(this.state.awnser===\"4\"?\"selected\":\"\",\"   \").concat(this.state.check?this.state.correctAwnser===\"4\"?\"correct\":\"\":\"\",\"     \").concat(this.state.check?this.state.awnser===\"4\"&&this.state.awnser!==this.state.correctAwnser?\"incorect\":\"\":\"\"),children:this.state.currentQuestion.choicefour})})]})}),/*#__PURE__*/_jsxs(\"div\",{id:\"questionleft\",children:[/*#__PURE__*/_jsxs(\"p\",{id:\"current-bar\",children:[this.state.currentCount+1,\"/\",question.length]}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"\".concat((this.state.currentCount+1)*100/question.length,\"%\")},id:\"bar\"})]})]})]}):\"\",this.state.leaderboard?/*#__PURE__*/_jsx(Leaderboard,{leadBoard:this.state.leadB}):\"\",/*#__PURE__*/_jsx(\"div\",{className:\"ktnlet\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){_this2.openChat(!_this2.props.open);},className:\"close-chat\",children:[\" \",/*#__PURE__*/_jsx(BsFillChatFill,{})]})})]}),/*#__PURE__*/_jsx(Chat,{openChat:this.openChat,open:this.state.chat})]});}}]);return Join;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return{loginAthification:function loginAthification(data){dispatch({type:\"JOIN\",data:data});}};};var mapstateToProps=function mapstateToProps(state){return{connected:state.connected,roomId:state.roomId,username:state.username};};export default connect(mapstateToProps,mapDispatchToProps)(withRouter(Join));","map":{"version":3,"sources":["/Users/kenneth/Desktop/react-project/lanch/src/page/join.js"],"names":["React","Component","withRouter","Chat","question","connect","BsFillChatFill","CountDown","socket","Leaderboard","time","realTimeLeaderboardState","Join","state","currentUser","message","game","start","leaderboard","awnser","currentCount","correctAwnser","liveCounter","check","currentQuestion","currentScore","begin","displayCount","leadB","chat","realTime","on","setState","setTimeout","document","querySelector","scrollTop","scrollHeight","startTheGame","data","name","Math","max","score","buildCounter","duration","timer","minutes","seconds","parseInt","componentWillUnmount","off","emit","props","roomId","loginAthification","connected","room","username","componentDidMount","history","push","checkAwnser","curentScore","moveNext","length","callTheGame","showLeaderBoard","currentLeaderBoard","key","sort","a","b","displayLeaderboad","handleClick","e","target","id","setInterval","clearInterval","openChat","choiceOne","choiceTwo","choiceThree","choicefour","width","open","mapDispatchToProps","dispatch","type","mapstateToProps"],"mappings":"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","sourcesContent":["import React,{Component} from \"react\"\nimport {withRouter} from \"react-router-dom\"\nimport Chat  from \"../component/chat\"\nimport question  from \"../question\"\nimport {connect} from \"react-redux\"\nimport { BsFillChatFill } from \"react-icons/bs\";\nimport CountDown  from \"../component/coutDown\"\nimport socket from \"../socketconf\";\nimport Leaderboard from \"../component/leaderboard\"\nlet time=null\nlet realTimeLeaderboardState={}\nclass Join extends Component {\n    state={\n        currentUser:0,\n        message:true,\n        game:false,\n        start:false,\n        leaderboard:false,\n        awnser:\"5\",\n        currentCount:0,\n        correctAwnser:\"5\",\n        liveCounter:11,\n        check:false,\n        currentQuestion:{},\n        currentScore:0,\n        begin:false,\n        displayCount:false,\n        leadB:[],\n        chat:false\n    }\nrealTime=()=>{\nsocket.on(\"beginTheGame\",()=>{\nthis.setState({\n    displayCount:true  \n})\nsetTimeout(()=>{\n    this.setState({\n        game:true\n    },()=>{\n        document.querySelector(\"#containerr\").scrollTop = document.querySelector(\"#containerr\").scrollHeight\n        this.setState({\n            displayCount:false\n        },()=>{\n            this.startTheGame()\n            this.setState({\n \n            })\n        })\n    })\n\n},4000)\n})\nsocket.on(\"update-score\",(data)=>{\nif(realTimeLeaderboardState[data.name]){\n    realTimeLeaderboardState[data.name]= Math.max(realTimeLeaderboardState[data.name],data.score)\n}else{\n    realTimeLeaderboardState[data.name]=data.score \n}\n})\n}\n\n buildCounter=(duration)=> {\n        var timer = duration, minutes, seconds;\n        minutes = parseInt(timer / 60, 10);\n        seconds = parseInt(timer % 60, 10);\n        minutes = minutes < 10 ? \"0\" + minutes : minutes;\n        seconds = seconds < 10 ? \"0\" + seconds : seconds;\n        //display.textContent = minutes + \":\" + seconds;\n        if (--timer < 0) {\n        return \"00:00\"\n        }else{\n            return minutes + \":\" + seconds\n        }\n    }\n    componentWillUnmount=()=>{\n        socket.off(\"beginTheGame\")\n        socket.off(\"update-score\")\n        socket.emit(\"leave-room\",this.props.roomId)\n        this.props.loginAthification({connected:false,room:\"\",username:\"\"})\n\n    }\n    componentDidMount=()=>{\n        if(!this.props.connected){\n            this.props.history.push(\"/\")\n        }else{\n            this.setState({\n                roomId:this.props.roomId ,\n                currentQuestion:question[this.state.currentCount],\n            })\n            this.realTime()\n        }\n           \n        }\n    checkAwnser=()=>{\n        this.setState({\n            check:true,\n            correctAwnser:this.state.currentQuestion.awnser\n        })\n        if(this.state.awnser!==\"5\"){\n            if(this.state.awnser===this.state.correctAwnser){\n                let curentScore= this.state.currentScore\n                curentScore+=10\n                this.setState({\n                  currentScore:curentScore\n                })\n              } \n        }else{\n\n        }\n        socket.emit('new-score',{room:this.props.roomId,name:this.props.username,score:this.state.currentScore})\n       \n      setTimeout(()=>{\n        this.setState({\n            liveCounter:11\n        },()=>{\n  \n            this.moveNext()\n            if(this.state.currentCount+1!==question.length){\n                this.callTheGame()\n            }\n\n        })\n      },5000)\n    }\nshowLeaderBoard=()=>{\nlet currentLeaderBoard=[]\nfor(let key in realTimeLeaderboardState){\n    currentLeaderBoard.push({name:key,score:realTimeLeaderboardState[key]})   \n}\ncurrentLeaderBoard.sort((a,b)=>b.score-a.score)\nthis.setState({\n    leadB:currentLeaderBoard\n},()=>{\n    this.displayLeaderboad()\n})\n}\n\ndisplayLeaderboad=()=>{\n    this.setState({\n        leaderboard:true,\n    },()=>{\n        document.querySelector(\"#containerr\").scrollTop = document.querySelector(\"#containerr\").scrollHeight\n    })\n\n}\n    moveNext=()=>{\n        if(this.state.currentCount+1!==question.length){\n            this.setState({\n                awnser:\"5\",\n                correctAwnser:\"5\",\n                check:false,\n                currentCount:this.state.currentCount+1,\n                currentQuestion:question[this.state.currentCount+1]\n            })\n        }else{\n          this.showLeaderBoard()\n        }\n        \n    }\n    handleClick=(e)=>{\n  this.setState({\n    awnser:e.target.id,\n    correctAwnser:this.state.currentQuestion.awnser\n  })\n    }\n\n    callTheGame=()=>{\n        time=setInterval(()=>{\n            if(this.state.liveCounter===1){\n                clearInterval(time)\n                this.setState({\n                    liveCounter:0\n                },()=>{\n                    this.checkAwnser()\n                })\n            }else{\n                this.setState({\n                    liveCounter:this.state.liveCounter-1\n                })\n            }\n        },1000)\n    }\n\n    openChat=(data)=>{\n        this.setState({\n            chat:data\n        })\n    }\n  startTheGame=()=>{\nthis.callTheGame()\n  }\n    render(){\n        return (\n            <div className=\"createe-user\">\n                 <div id=\"containerr\"> \n                 <CountDown displayCount={this.state.displayCount}/>\n                  <div id=\"createe\"> \n                  <div id=\"back-page\">\n                  <i className=\"fas fa-chevron-left\">\n                  </i></div> \n                    </div>\n                  {this.state.message? <div id=\"message\">\n                    <header id=\"header\">\n                     {/* <p id=\"numer-client\">{this.state.currentUser}</p>*/}\n                     <p id=\"user-game-name\">CS Trivia</p>\n                    </header>\n                    <div id=\"code\">\n                    <p id=\"message-game\">Wait for the host to start the game</p>\n                    <div id=\"box-room\">\n                    <p id=\"h3\">Room Id</p><p id=\"room-id\">{this.state.roomId}</p>\n                    </div>\n                    </div><div id=\"ready-box\"><p id=\"text-redy\">3</p></div>\n                    <div id=\"overlay\"></div>\n                    <div id=\"people-connected\">\n                    <div className=\"closes\"><p className=\"fas fa-times\"></p></div>\n                    <div id=\"test-descrb-people\">Player </div>\n                    <div id=\"title-name-conected\"></div>\n                    <div id=\"list\"><div className=\"list-people\">\n                    <i id=\"ico\" className=\"far fa-user-circle\"></i>\n                    <div id=\"name-connected\"> \n                    <p id=\"name-user-conec\">{this.props.username}</p> \n                    <p id=\"host\"></p>\n                    </div> \n                    </div></div>\n                    </div>\n                    </div>:\"\"}\n                    {this.state.game?<div id=\"game\">\n                    <header id=\"head\">\n                    <p id=\"online-user\">{this.props.username}</p>\n                    <div id=\"point\">\n                    <p id=\"coin\">{this.state.currentScore}</p>\n                    </div>\n                   \n                    </header>\n                    <div id=\"online-game\"> \n                    <div id=\"timeur\">\n                    <p id=\"time\">{this.buildCounter(this.state.liveCounter)}</p>\n                    </div> \n                    <div id=\"question\">\n         <div id=\"imgpp\"></div>\n        <p id=\"curentquest\">{this.state.currentQuestion.question}</p>\n       </div>\n       <ul>      \n       <div id=\"wraper\">\n       <div id=\"one\" className=\"awnser\">   \n       <li onClick={this.handleClick} id=\"1\" className={`awnsers ${this.state.awnser===\"1\"?\"selected\":\"\" }   ${this.state.check?this.state.correctAwnser===\"1\"?\"correct\":\"\":\"\"} ${this.state.check?this.state.awnser===\"1\" && this.state.awnser!==this.state.correctAwnser?\"incorect\":\"\":\"\"}`   }>{this.state.currentQuestion.choiceOne}</li>\n       </div>\n       <div id=\"two\" className=\"awnser\">\n       <li onClick={this.handleClick} id=\"2\" className={`awnsers ${this.state.awnser===\"2\"?\"selected\":\"\" }   ${this.state.check?this.state.correctAwnser===\"2\"?\"correct\":\"\" :\"\"} ${this.state.check?this.state.awnser===\"2\" && this.state.awnser!==this.state.correctAwnser?\"incorect\":\"\":\"\"}`   }>{this.state.currentQuestion.choiceTwo}</li>\n       </div>\n       <div id=\"three\" className=\"awnser\">\n       <li onClick={this.handleClick} id=\"3\"  className={`awnsers ${this.state.awnser===\"3\"?\"selected\":\"\" }   ${this.state.check?this.state.correctAwnser===\"3\"?\"correct\":\"\":\"\" }  ${this.state.check?this.state.awnser===\"3\" && this.state.awnser!==this.state.correctAwnser?\"incorect\":\"\":\"\"} `   }>{this.state.currentQuestion.choiceThree}</li>\n       </div>\n       <div id=\"four\" className=\"awnser\">\n       <li onClick={this.handleClick} id=\"4\" className={`awnsers ${this.state.awnser===\"4\"?\"selected\":\"\" }   ${this.state.check?this.state.correctAwnser===\"4\"?\"correct\":\"\":\"\" }     ${this.state.check?this.state.awnser===\"4\" && this.state.awnser!==this.state.correctAwnser?\"incorect\":\"\":\"\"}`    }>{this.state.currentQuestion.choicefour}</li>\n       </div>\n       </div>\n       </ul>\n       <div id=\"questionleft\">\n       <p id=\"current-bar\">{this.state.currentCount+1}/{question.length}</p><div style={{width: `${(this.state.currentCount+1)*100/question.length}%`}} id=\"bar\">  \n       </div>\n       </div>\n       </div>\n       </div>:\"\"}\n      {this.state.leaderboard? <Leaderboard leadBoard={this.state.leadB}/>:\"\"}\n      <div className=\"ktnlet\">\n                   <button onClick={()=>{this.openChat(!this.props.open)}} className=\"close-chat\"> <BsFillChatFill/></button>\n                   </div>\n\t\t</div>\n        <Chat openChat={this.openChat} open={this.state.chat}/>\n        </div>\n         \n          \n        )\n    }\n}\nconst mapDispatchToProps=(dispatch)=>{\n    return{\n      loginAthification:(data)=>{\n        dispatch({ type:\"JOIN\", data:data})\n      },\n    }\n      }\n      const mapstateToProps=(state)=>{\n        return{\n            connected:state.connected,\n            roomId:state.roomId,\n            username:state.username\n        }\n        }\n        \nexport default connect(mapstateToProps,mapDispatchToProps) (withRouter(Join))"]},"metadata":{},"sourceType":"module"}